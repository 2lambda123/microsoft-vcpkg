###########################################################################
## This file defines the current expected build state of ports in CI.
##
## States
##   pass - (default) the port builds in the CI system.  If a port is
##          missing from this file then it is assumed to build.
##   fail - the port does not build in the CI system.
##          This is not necessarily the same as if a port is expected to build
##          on a developers machine because it may fail due to the machine
##          configuration.  When set to fail the CI system will still attempt
##          to build the port and will report a CI failure until this file is updated.
##   skip - Do not build this port in the CI system.
##          This is added to ports that may be flaky or conflict with other
##          ports.  Please comment for why a port is skipped so it can be
##          removed when the issue is resolved.
##
##
## CI tested triplets:
##    arm64-windows
##    arm-uwp
##    x64-linux
##    x64-osx
##    x64-uwp
##    x64-windows
##    x64-windows-static
##    x86-windows
##


# Add new items alphabetically
# Cross compiling CI machine cannot run gen_test_char to generate apr_escape_test_char.h
apr:arm64-windows=fail

# Requires ATL for ARM64 to be installed in CI
azure-storage-cpp:arm64-windows=fail

# capnproto currently triggers an ICE
capnproto:x86-windows=fail
capnproto:x64-windows=fail
capnproto:x64-windows-static=fail

catch-classic:arm64-windows      = skip
catch-classic:arm-uwp            = skip
catch-classic:x64-linux          = skip
catch-classic:x64-osx            = skip
catch-classic:x64-uwp            = skip
catch-classic:x64-windows        = skip
catch-classic:x64-windows-static = skip
catch-classic:x86-windows        = skip

# DCMTK currently has a vendored copy of libcharls.a, which causes conflicts with charls (TODO: use charls' copy)
charls:arm64-windows=skip
charls:arm-uwp=skip
charls:x64-linux=skip
charls:x64-osx=skip
charls:x64-uwp=skip
charls:x64-windows=skip
charls:x64-windows-static=skip
charls:x86-windows=skip

civetweb:arm64-windows      = skip
civetweb:arm-uwp            = skip
civetweb:x64-uwp            = skip

# clapack is replaced by lapack-reference.
clapack:arm64-windows=skip
clapack:arm-uwp=skip
clapack:x64-linux=skip
clapack:x64-osx=skip
clapack:x64-uwp=skip
clapack:x64-windows-static=skip
clapack:x64-windows=skip
clapack:x86-windows=skip

cmcstl2:arm64-windows      = skip
cmcstl2:arm-uwp            = skip
cmcstl2:x64-linux          = skip
cmcstl2:x64-osx            = skip
cmcstl2:x64-uwp            = skip
cmcstl2:x64-windows        = skip
cmcstl2:x64-windows-static = skip
cmcstl2:x86-windows        = skip

# Official downloading server of CTP library is only guaranteed to be available during trading hours of China futures market
# Skip CI to avoid random failures
ctp:arm64-windows=skip
ctp:arm-uwp=skip
ctp:x64-linux=skip
ctp:x64-osx=skip
ctp:x64-uwp=skip
ctp:x64-windows=skip
ctp:x64-windows-static=skip
ctp:x86-windows=skip

# Since pipeline cannot automatically install dbghelp dependency, skip this detection
dbghelp:arm-uwp=skip
dbghelp:arm64-windows=skip
dbghelp:x64-uwp=skip
dbghelp:x64-windows-static=skip
dbghelp:x64-windows=skip
dbghelp:x86-windows=skip

dpdk:x64-linux=fail

duckx:arm64-windows      = skip
duckx:arm-uwp            = skip
duckx:x64-linux          = skip
duckx:x64-osx            = skip
duckx:x64-uwp            = skip
duckx:x64-windows        = skip
duckx:x64-windows-static = skip
duckx:x86-windows        = skip

# requires python@2 from brew, but that no longer exists
# python2 EOL yay!
duktape:x64-osx=skip

ecm:arm64-windows      = skip
ecm:arm-uwp            = skip
ecm:x64-linux          = skip
ecm:x64-osx            = skip
ecm:x64-uwp            = skip
ecm:x64-windows        = skip
ecm:x64-windows-static = skip
ecm:x86-windows        = skip

# fluidlite conflicts with fluidsynth; we test fluidsynth rather than fluidlite because
# fluidlite has no dependencies and thus is less likely to be broken by another package.
fluidlite:arm-uwp=skip
fluidlite:arm64-windows=skip
fluidlite:x64-linux=skip
fluidlite:x64-osx=skip
fluidlite:x64-uwp=skip
fluidlite:x64-windows-static=skip
fluidlite:x64-windows=skip
fluidlite:x86-windows=skip

# Needs /bigobj
freeopcua:arm64-windows=fail

gdcm:x64-linux               = skip

# Conflicts with libevent
gherkin-c:arm64-windows      = skip
gherkin-c:arm-uwp            = skip
gherkin-c:x64-uwp            = skip
gherkin-c:x64-windows        = skip
gherkin-c:x64-windows-static = skip
gherkin-c:x86-windows        = skip

# VS 2019 16.7 broke gmp UWP https://github.com/microsoft/vcpkg/issues/13172
gmp:x64-uwp=fail

# https://github.com/microsoft/vcpkg/pull/11048
gtk:x64-linux=fail

ignition-msgs5:x64-osx=skip

intel-mkl:arm64-windows=fail
intel-mkl:arm-uwp=fail
intel-mkl:x64-linux=fail
intel-mkl:x64-osx=fail
intel-mkl:x64-uwp=fail
intel-mkl:x64-windows=fail
intel-mkl:x64-windows-static=fail
intel-mkl:x86-windows=fail

libmariadb:arm64-windows      = skip
libmariadb:arm-uwp            = skip
libmariadb:x64-linux          = skip
libmariadb:x64-osx            = skip
libmariadb:x64-uwp            = skip
libmariadb:x64-windows        = skip
libmariadb:x64-windows-static = skip
libmariadb:x86-windows        = skip

# libmesh installs tons of problematic files that conflict with other ports (boost, eigen, etc)
libmesh:arm64-windows=skip
libmesh:arm-uwp=skip
libmesh:x64-uwp=skip
libmesh:x64-windows=skip
libmesh:x64-windows-static=skip
libmesh:x86-windows=skip
libmesh:x64-osx=skip
libmesh:x64-linux=skip

libp7-baical:arm64-windows      = skip
libp7-baical:arm-uwp            = skip
libp7-baical:x64-linux          = skip
libp7-baical:x64-osx            = skip
libp7-baical:x64-uwp            = skip
libp7-baical:x64-windows        = skip
libp7-baical:x64-windows-static = skip
libp7-baical:x86-windows        = skip

libpng-apng:arm64-windows      = skip
libpng-apng:arm-uwp            = skip
libpng-apng:x64-linux          = skip
libpng-apng:x64-osx            = skip
libpng-apng:x64-uwp            = skip
libpng-apng:x64-windows        = skip
libpng-apng:x64-windows-static = skip
libpng-apng:x86-windows        = skip

# Conflicts with openssl
boringssl:arm64-windows      = skip
boringssl:arm-uwp            = skip
boringssl:x64-linux          = skip
boringssl:x64-osx            = skip
boringssl:x64-uwp            = skip
boringssl:x64-windows        = skip
boringssl:x64-windows-static = skip
boringssl:x86-windows        = skip
libressl:arm64-windows      = skip
libressl:arm-uwp            = skip
libressl:x64-linux          = skip
libressl:x64-osx            = skip
libressl:x64-uwp            = skip
libressl:x64-windows        = skip
libressl:x64-windows-static = skip
libressl:x86-windows        = skip

# Causes build failures in vxl and podofo on osx
# Conflicts with Darwin kernel sdk uuid.h (has missing definitions)
libuuid:x64-osx = skip

live555:arm64-windows=fail
live555:arm-uwp=fail
live555:x64-linux=fail
live555:x64-osx=fail
live555:x64-uwp=fail
live555:x64-windows=fail
live555:x64-windows-static=fail
live555:x86-windows=fail

luajit:arm64-windows      = skip
luajit:arm-uwp            = skip
luajit:x64-linux          = skip
luajit:x64-osx            = skip
luajit:x64-uwp            = skip
luajit:x64-windows        = skip
luajit:x64-windows-static = skip
luajit:x86-windows        = skip

mecab:arm64-windows      = skip
mecab:arm-uwp            = skip
mecab:x64-linux          = skip
mecab:x64-uwp            = skip
mecab:x64-windows        = skip
mecab:x64-windows-static = skip
mecab:x86-windows        = skip

# Conflicts with signalrclient
microsoft-signalr:arm64-windows=skip
microsoft-signalr:arm-uwp=skip
microsoft-signalr:x64-linux=skip
microsoft-signalr:x64-osx=skip
microsoft-signalr:x64-uwp=skip
microsoft-signalr:x64-windows=skip
microsoft-signalr:x64-windows-static=skip
microsoft-signalr:x86-windows=skip

# mmx installs many problematic headers, such as `json.h` and `sched.h`
mmx:x64-windows=skip
mmx:x64-windows-static=skip
mmx:x86-windows=skip
mmx:x64-linux=skip
mmx:x64-osx=skip
mmx:arm-uwp=skip
mmx:x64-uwp=skip
mmx:arm64-windows=skip

# Flaky strange linker error
mongo-c-driver:x64-osx=skip

# Conflicts with libjpeg-turbo
mozjpeg:arm64-windows      = skip
mozjpeg:arm-uwp            = skip
mozjpeg:x64-linux          = skip
mozjpeg:x64-osx            = skip
mozjpeg:x64-uwp            = skip
mozjpeg:x64-windows        = skip
mozjpeg:x64-windows-static = skip
mozjpeg:x86-windows        = skip

# mpir conflicts with gmp
# see https://github.com/microsoft/vcpkg/issues/11756
mpir:x86-windows=skip
mpir:x64-windows=skip
mpir:x64-windows-static=skip
mpir:arm64-windows=skip
mpir:x64-osx=skip
mpir:x64-linux=skip

nanorange:arm64-windows=fail
nanorange:arm-uwp=fail
nanorange:x64-linux=fail
nanorange:x64-osx=fail
nanorange:x64-uwp=fail
nanorange:x64-windows=fail
nanorange:x64-windows-static=fail
nanorange:x86-windows=fail

nettle:x64-windows-static=skip
nettle:x64-windows=skip

ogdf:arm64-windows      = skip
ogdf:arm-uwp            = skip
ogdf:x64-uwp            = skip
ogdf:x64-windows        = skip
ogdf:x64-windows-static = skip
ogdf:x86-windows        = skip

# Conflicts with ogre
ogre-next:arm64-windows      = skip
ogre-next:arm-uwp            = skip
ogre-next:x64-osx            = skip
ogre-next:x64-linux          = skip
ogre-next:x64-uwp            = skip
ogre-next:x64-windows        = skip
ogre-next:x64-windows-static = skip
ogre-next:x86-windows        = skip

# ompl is vulnerable to some form of race in its dependent ports, and adding 'ode' as a dependency
# does not resolve the issue
# src/ompl/CMakeFiles/ompl.dir/extensions/ode/src/OpenDEStateValidityChecker.cpp.o
# -L/mnt/vcpkg-ci/packages/flann_x64-linux/debug/lib   -L/mnt/vcpkg-ci/packages/ode_x64-linux/debug/lib
# -Wl,-rpath,/mnt/vcpkg-ci/packages/flann_x64-linux/debug/lib:/mnt/vcpkg-ci/packages/ode_x64-linux/debug/lib::::::::::::::::::::::::::::::::::::::::::::::::
# -lode  /mnt/vcpkg-ci/installed/x64-linux/debug/lib/libboost_serialization.a 
# /mnt/vcpkg-ci/installed/x64-linux/debug/lib/libboost_filesystem.a 
# /mnt/vcpkg-ci/installed/x64-linux/debug/lib/libboost_system.a  -lpthread && :
# /usr/bin/ld: cannot find -lode
ompl:x64-osx=fail
ompl:x64-linux=fail

opencv2:arm64-windows      = skip
opencv2:arm-uwp            = skip
opencv2:x64-linux          = skip
opencv2:x64-osx            = skip
opencv2:x64-uwp            = skip
opencv2:x64-windows        = skip
opencv2:x64-windows-static = skip
opencv2:x86-windows        = skip

opencv3:arm64-windows      = skip
opencv3:arm-uwp            = skip
opencv3:x64-linux          = skip
opencv3:x64-osx            = skip
opencv3:x64-uwp            = skip
opencv3:x64-windows        = skip
opencv3:x64-windows-static = skip
opencv3:x86-windows        = skip

optional-bare:arm64-windows      = skip
optional-bare:arm-uwp            = skip
optional-bare:x64-linux          = skip
optional-bare:x64-osx            = skip
optional-bare:x64-uwp            = skip
optional-bare:x64-windows        = skip
optional-bare:x64-windows-static = skip
optional-bare:x86-windows        = skip

# pfring on Linux currently fails because its build scripts enable warnings as
# errors, and warnings trigger with the Linux kernel headers in the Azure images.
pfring:x64-linux=fail

# Portaudio was broken by Ninja 1.9.0 https://github.com/ninja-build/ninja/pull/1406
portaudio:arm-uwp=fail
portaudio:arm64-windows=fail
portaudio:x64-uwp=fail
portaudio:x64-windows-static=fail
portaudio:x64-windows=fail
portaudio:x86-windows=fail

# Skip deprecated Qt module
# (remnove after 1 year or longer due to vcpkg upgrade not handling removed ports correctly)
qt5-canvas3d:x64-linux=skip
qt5-canvas3d:x64-osx=skip
qt5-canvas3d:x64-windows=skip
qt5-canvas3d:x64-windows-static=skip
qt5-canvas3d:x86-windows=skip

# Missing system libraries
qt5-wayland:x64-osx=fail

# Missing libraries
qt5-wayland:x86-windows=fail
qt5-wayland:x64-windows=fail
qt5-wayland:x64-windows-static=fail
qt5-winextras:x64-linux=fail
qt5-winextras:x64-osx=fail

# Missing prerequisites for CI success
qt5-webengine:x64-linux=fail
qt5-webengine:x64-osx=fail

# Fail due to outdated protoc headers.
# D:\buildtrees\qt5-webengine\x64-windows-dbg\src\core\debug\gen\net/third_party/quiche/src/quic/core/proto/cached_network_parameters.pb.h(17):
# fatal error C1189: #error:  This file was generated by an older version of protoc which is
# Succesful built requires protobuf to be installed after qt5-webengine not before. Otherwise the build picks up the wrong headers from inside vcpkg.
qt5-webengine:x64-windows=skip
qt5-webengine:x86-windows=skip

# Static builds of qt5-webengine are not supported by the port itself
qt5-webengine:x64-windows-static=skip

# Missing system libraries
qt5-x11extras:x64-osx=fail

# Missing libraries
qt5-x11extras:x86-windows=fail
qt5-x11extras:x64-windows=fail
qt5-x11extras:x64-windows-static=fail

quirc:arm64-windows      = skip
quirc:arm-uwp            = skip
quirc:x64-linux          = skip
quirc:x64-osx            = skip
quirc:x64-uwp            = skip
quirc:x64-windows        = skip
quirc:x64-windows-static = skip
quirc:x86-windows        = skip

range-v3-vs2015:arm64-windows      = skip
range-v3-vs2015:arm-uwp            = skip
range-v3-vs2015:x64-linux          = skip
range-v3-vs2015:x64-osx            = skip
range-v3-vs2015:x64-uwp            = skip
range-v3-vs2015:x64-windows        = skip
range-v3-vs2015:x64-windows-static = skip
range-v3-vs2015:x86-windows        = skip

# file conflicts with msgpack
rest-rpc:x86-windows=skip
rest-rpc:x64-windows=skip
rest-rpc:x64-windows-static=skip
rest-rpc:x64-uwp=skip
rest-rpc:arm-uwp=skip
rest-rpc:arm64-windows=skip
rest-rpc:x64-linux=skip
rest-rpc:x64-osx=skip

# https://github.com/microsoft/vcpkg/issues/10918
seal:arm-uwp=fail
seal:x64-uwp=fail

shogun:arm64-windows      = skip
shogun:arm-uwp            = skip
shogun:x64-osx            = skip
shogun:x64-uwp            = skip
shogun:x64-windows        = skip
shogun:x64-windows-static = skip
shogun:x86-windows        = skip

# soil upstream is gone; if we do not have another source before 2021-03-01 we will remove the port
soil:arm-uwp=skip
soil:x64-uwp=skip
soil:arm64-windows=skip
soil:x64-windows=skip
soil:x86-windows=skip
soil:x64-windows-static=skip
soil:x64-linux=skip
soil:x64-osx=skip

spdk:x64-linux=fail

# Sundials was broken by Ninja 1.9.0 https://github.com/ninja-build/ninja/pull/1406
sundials:arm64-windows=fail
sundials:x64-windows=fail
sundials:x86-windows=fail

tensorflow-cc:arm64-windows=fail
tensorflow-cc:x64-linux=skip
tensorflow-cc:x64-osx=skip
tensorflow-cc:x64-windows=fail
tensorflow-cc:x64-windows-static=fail
tensorflow-cc:x86-windows=fail

theia:arm64-windows      = skip
theia:arm-uwp            = skip
theia:x64-uwp            = skip
theia:x64-windows        = skip
theia:x64-windows-static = skip
theia:x86-windows        = skip

#Flaky on windows only due to error PRI210: 0x80070020 - File move failed
tmx:arm64-windows      = skip
tmx:arm-uwp            = skip
tmx:x64-uwp            = skip
tmx:x64-windows        = skip
tmx:x64-windows-static = skip
tmx:x86-windows        = skip

vulkan:arm64-windows=fail
vulkan:arm-uwp=fail
vulkan:x64-linux=fail
vulkan:x64-osx=fail
vulkan:x64-uwp=fail
vulkan:x64-windows=fail
vulkan:x64-windows-static=fail
vulkan:x86-windows=fail

# Conflicts with latest openjpeg port (vxl ships with an old version of openjpeg)
# conflicts with qt5-location
vxl:arm64-windows      = skip
vxl:arm-uwp            = skip
vxl:x64-linux          = skip
vxl:x64-osx            = skip
vxl:x64-uwp            = skip
vxl:x64-windows        = skip
vxl:x64-windows-static = skip
vxl:x86-windows        = skip

winpcap:arm64-windows      = skip
winpcap:arm-uwp            = skip
winpcap:x64-uwp            = skip
winpcap:x64-windows        = skip
winpcap:x64-windows-static = skip
winpcap:x86-windows        = skip

# The xmsh upstream repository is gone, if we find no replacement before
# 2021-01-01 we will remove the port outright.
xmsh:arm-uwp=skip
xmsh:arm64-windows=skip
xmsh:x64-linux=skip
xmsh:x64-osx=skip
xmsh:x64-uwp=skip
xmsh:x64-windows-static=skip
xmsh:x64-windows=skip
xmsh:x86-windows=skip
