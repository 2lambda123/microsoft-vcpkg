set(VCPKG_POLICY_EMPTY_PACKAGE enabled)

# Only Windows
if(CMAKE_HOST_WIN32)
    foreach(PROG GO)
        vcpkg_find_acquire_program(${PROG})
        foreach(SUBPROG IN LISTS ${PROG})
            if(NOT EXISTS "${SUBPROG}")
                message(FATAL_ERROR "Program ${SUBPROG} did not exist.")
            endif()
        endforeach()
    endforeach()
endif()

# Windows and Linux
if(CMAKE_HOST_WIN32 OR CMAKE_HOST_SYSTEM_NAME STREQUAL "Linux")
    foreach(PROG NASM)
        vcpkg_find_acquire_program(${PROG})
        foreach(SUBPROG IN LISTS ${PROG})
            if(NOT EXISTS "${SUBPROG}")
                message(FATAL_ERROR "Program ${SUBPROG} did not exist.")
            endif()
        endforeach()
    endforeach()
endif()

# All Platforms
foreach(PROG PERL YASM GIT GN PYTHON3 PYTHON2 RUBY JOM 7Z NINJA NUGET MESON FLEX BISON GPERF GASPREPROCESSOR DARK SCONS SWIG DOXYGEN BAZEL ARIA2 PKGCONFIG)
    vcpkg_find_acquire_program(${PROG})
    foreach(SUBPROG IN LISTS ${PROG})
        if(NOT EXISTS "${SUBPROG}")
            message(FATAL_ERROR "Program ${SUBPROG} did not exist.")
        endif()
    endforeach()
endforeach()
