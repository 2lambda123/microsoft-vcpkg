## # vcpkg_clean_working_dir
##
## Clean intermediate files generated by the build process.
##
## ## Usage
## ```cmake
## vcpkg_clean_working_dir(<WORKING_DIR>)
## ```

function(vcpkg_clean_working_dir WORKING_DIR)
    if(NOT DEFINED VCPKG_NO_CLEAN)
        if(EXISTS ${WORKING_DIR})
            file(GLOB_RECURSE DEBUG_FILES LIST_DIRECTORIES false ${WORKING_DIR}/*.pdb)
            file(GLOB_RECURSE BUILD_OBJS LIST_DIRECTORIES false ${WORKING_DIR}/*)
            if(DEBUG_FILES)
                list(REMOVE_ITEM BUILD_OBJS ${DEBUG_FILES})
            endif()
            file(REMOVE ${BUILD_OBJS})
        endif()
    endif()
endfunction()
