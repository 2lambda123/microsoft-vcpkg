diff --git a/CMakeLists.txt b/CMakeLists.txt
index e440b4b..a232685 100644
--- a/CMakeLists.txt
+++ b/CMakeLists.txt
@@ -725,8 +725,13 @@ IF(USE_HDF5 OR ENABLE_NETCDF_4)
   #Check to see if H5Z_SZIP exists in HDF5_Libraries. If so, we must use szip.
   CHECK_LIBRARY_EXISTS(${HDF5_C_LIBRARY_hdf5} H5Z_SZIP "" USE_SZIP)
   IF(USE_SZIP)
-    FIND_LIBRARY(SZIP NAMES szip sz)
+    GET_PROPERTY(SZIP TARGET ${HDF5_C_LIBRARY_hdf5} PROPERTY INTERFACE_LINK_LIBRARIES)
+    MESSAGE("FRUKTFRUKTFRUKTFRUKTFRUKTFRUKTFRUKTFRUKTFRUKTFRUKT")
+    MESSAGE(SZIP)
+    MESSAGE(${HDF5_C_LIBRARY_hdf5})
+    # FIND_LIBRARY(SZIP NAMES szip sz)
     IF(SZIP)
+      MESSAGE("SZIP WAS FOUND")
       SET(HAVE_H5Z_SZIP 1)
       SET(SZIP_LIBRARY ${SZIP})
       SET(CMAKE_REQUIRED_LIBRARIES ${CMAKE_REQUIRED_LIBRARIES} ${SZIP})
@@ -1312,6 +1317,9 @@ IF(SIZEOF_UINT)
   SET(HAVE_UINT TRUE)
 ENDIF(SIZEOF_UINT)
 
+message("AVISERAVISERAVISERAVISERAVISERAVISERAVISERAVISER")
+message(SIZEOF_INT)
+
 CHECK_TYPE_SIZE("schar"      SIZEOF_SCHAR)
 IF(SIZEOF_SCHAR)
   SET(HAVE_SCHAR TRUE)
