diff --git a/include/ncconfigure.h b/include/ncconfigure.h
index c9440fd..da3ea1c 100644
--- a/include/ncconfigure.h
+++ b/include/ncconfigure.h
@@ -72,7 +72,7 @@ extern int fileno(FILE*);
 
 /* handle null arguments */
 #ifndef nulldup
-#ifdef HAVE_STRDUP
+#ifdef strdup
 #define nulldup(s) ((s)==NULL?NULL:strdup(s))
 #else
 extern char *nulldup(const char* s);
