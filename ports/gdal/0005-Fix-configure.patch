diff --git a/configure.ac b/configure.ac
index bd85e0616..5023a6724 100644
--- a/configure.ac
+++ b/configure.ac
@@ -1298,6 +1298,7 @@ elif test "x${with_libtiff}" = "xinternal" ; then
 else
 
   TIFF_SETTING=external
+  if 0; then
   if test -r "$with_libtiff/tiff.h" ; then
     LIBS="-L$with_libtiff -ltiff $LIBS"
     EXTRA_INCLUDES="-I$with_libtiff $EXTRA_INCLUDES"
@@ -1305,11 +1306,12 @@ else
     LIBS="-L$with_libtiff/lib -ltiff $LIBS"
     EXTRA_INCLUDES="-I$with_libtiff/include $EXTRA_INCLUDES"
   fi
+  fi
 
   AC_MSG_RESULT([using libtiff from ${with_libtiff}.])
 
   dnl Check for the BigTIFF enabled library (libtiff >= 4.0)
-  AC_CHECK_LIB(tiff,TIFFScanlineSize64,HAVE_BIGTIFF=yes,HAVE_BIGTIFF=no,)
+  AC_SEARCH_LIBS(TIFFScanlineSize64,[tiff tiffd],HAVE_BIGTIFF=yes,HAVE_BIGTIFF=no,)
 
 fi
 
@@ -1338,18 +1340,19 @@ if test "`basename xx/$with_curl`" = "curl-config" ; then
 elif test "$with_curl" = "no" ; then
   LIBCURL_CONFIG=no
 else
-  AC_PATH_PROG(LIBCURL_CONFIG, curl-config, no)
+  LIBCURL_CONFIG=yes
 fi
 
 if test "$LIBCURL_CONFIG" != "no" ; then
-
+  if 0; then
   CURL_VERNUM=`$LIBCURL_CONFIG --vernum`
   CURL_VER=`$LIBCURL_CONFIG --version | awk '{print $2}'`
 
   AC_MSG_RESULT([        found libcurl version $CURL_VER])
 
   AC_CHECK_LIB(curl,curl_global_init,CURL_SETTING=yes,CURL_SETTING=no,`$LIBCURL_CONFIG --libs`)
-
+  fi
+  CURL_SETTING=yes
 fi
 
 AC_SUBST(CURL_SETTING,$CURL_SETTING)
@@ -1570,12 +1573,10 @@ dnl ---------------------------------------------------------------------------
 AC_ARG_WITH(liblzma,[  --with-liblzma[=ARG]       Include liblzma support (ARG=yes/no)],,)
 
 if test "$with_liblzma" = "yes" ; then
-  AC_CHECK_LIB(lzma,lzma_code,LIBLZMA_SETTING=yes,LIBLZMA_SETTING=no,)
+  AC_SEARCH_LIBS(lzma_code,[lzma lzmad],LIBLZMA_SETTING=yes,LIBLZMA_SETTING=no,)
   AC_CHECK_HEADERS(lzma.h)
 
-  if test "$LIBLZMA_SETTING" = "yes" -a "$ac_cv_header_lzma_h" = "yes" ; then
-    LIBS="-llzma $LIBS"
-  else
+  if test "$ac_cv_header_lzma_h" != "yes" ; then
     LIBLZMA_SETTING=no
   fi
 else
@@ -1891,7 +1892,7 @@ else
     PG_LIB="${PQ_LIBS}"
     PG_INC="${PQ_CFLAGS}"
     SAVED_LIBS="${LIBS}"
-    LIBS="${PG_LIB}"
+    LIBS="${PG_LIB} ${LIBS}"
     AC_CHECK_LIB(pq,PQconnectdb,HAVE_PG=yes,HAVE_PG=no)
     LIBS="${SAVED_LIBS}"
     if test "${HAVE_PG}" = "yes" ; then
@@ -4281,6 +4282,7 @@ AC_ARG_WITH(xml2,
 
 if test "x$with_xml2" = "xyes" -o "x$with_xml2" = "x" ; then
 
+  if 0; then
   PKG_PROG_PKG_CONFIG([0.21])
   PKG_CHECK_MODULES(LIBXML2,[libxml-2.0], [HAVE_LIBXML2=yes], [HAVE_LIBXML2=no])
 
@@ -4299,6 +4301,8 @@ if test "x$with_xml2" = "xyes" -o "x$with_xml2" = "x" ; then
       AC_MSG_ERROR([--with-xml2 was requested, but libxml2 is not available])
     fi
   fi
+  fi
+  HAVE_LIBXML2=yes
 elif test "x$with_xml2" != "xno"; then
   AC_MSG_ERROR([Only --with-xml2=yes/no supported])
 fi

diff --git a/m4/ax_lib_sqlite3.m4 b/m4/ax_lib_sqlite3.m4
index e53a4a967..440e2c5ed 100644
--- a/m4/ax_lib_sqlite3.m4
+++ b/m4/ax_lib_sqlite3.m4
@@ -76,23 +76,22 @@ AC_DEFUN([AX_LIB_SQLITE3],
 
             unset ac_cv_lib_sqlite3_sqlite3_open
             saved_LIBS="$LIBS"
-            LIBS=""
             AC_CHECK_LIB(sqlite3,sqlite3_open,LIB_SQLITE3_FOUND=yes,LIB_SQLITE3_FOUND=no,-L$ac_sqlite3_path/lib)
             LIBS="$saved_LIBS"
             if test "$LIB_SQLITE3_FOUND" = "yes"; then
                 ac_sqlite3_ldflags="-L$ac_sqlite3_path/lib"
             fi
 
+            ac_sqlite3_include_path="$ac_sqlite3_path/include"
             ac_sqlite3_cppflags="-I$ac_sqlite3_path/include"
         else
-            for ac_sqlite3_path_tmp in /usr /usr/local /opt ; do
-                if test -f "$ac_sqlite3_path_tmp/include/$ac_sqlite3_header" \
-                    && test -r "$ac_sqlite3_path_tmp/include/$ac_sqlite3_header"; then
+            for ac_sqlite3_path_tmp in $prefix /usr /usr/local /opt; do
+                if (test -f "$ac_sqlite3_path_tmp/include/$ac_sqlite3_header" \
+                    && test -r "$ac_sqlite3_path_tmp/include/$ac_sqlite3_header") || (test -f "$ac_sqlite3_path_tmp/../include/$ac_sqlite3_header" && test -r "$ac_sqlite3_path_tmp/../include/$ac_sqlite3_header"); then
                     ac_sqlite3_path=$ac_sqlite3_path_tmp
 
                     unset ac_cv_lib_sqlite3_sqlite3_open
                     saved_LIBS="$LIBS"
-                    LIBS=""
                     AC_CHECK_LIB(sqlite3,sqlite3_open,LIB_SQLITE3_FOUND=yes,LIB_SQLITE3_FOUND=no,)
                     LIBS="$saved_LIBS"
                     if test "$LIB_SQLITE3_FOUND" = "yes"; then
@@ -100,7 +99,6 @@ AC_DEFUN([AX_LIB_SQLITE3],
                     else
                         unset ac_cv_lib_sqlite3_sqlite3_open
                         saved_LIBS="$LIBS"
-                        LIBS=""
                         AC_CHECK_LIB(sqlite3,sqlite3_open,LIB_SQLITE3_FOUND=yes,LIB_SQLITE3_FOUND=no,-L$ac_sqlite3_path_tmp/lib)
                         LIBS="$saved_LIBS"
                         if test "$LIB_SQLITE3_FOUND" = "yes"; then
@@ -108,7 +106,12 @@ AC_DEFUN([AX_LIB_SQLITE3],
                         fi
                     fi
 
-                    ac_sqlite3_cppflags="-I$ac_sqlite3_path_tmp/include"
+                    if test -f "$ac_sqlite3_path_tmp/include/$ac_sqlite3_header" && test -r "$ac_sqlite3_path_tmp/include/$ac_sqlite3_header"; then
+                        ac_sqlite3_include_path="$ac_sqlite3_path_tmp/include"
+                    else
+                        ac_sqlite3_include_path="$ac_sqlite3_path_tmp/../include"
+                    fi
+                    ac_sqlite3_cppflags="-I$ac_sqlite3_include_path"
                     break;
                 fi
             done
@@ -122,7 +125,6 @@ AC_DEFUN([AX_LIB_SQLITE3],
     AC_MSG_CHECKING([for SQLite3 library >= $sqlite3_version_req])
 
     if test "x$WANT_SQLITE3" = "xyes"; then
-
         ac_sqlite3_ldflags="$ac_sqlite3_ldflags -lsqlite3"
 
         saved_CPPFLAGS="$CPPFLAGS"
@@ -161,7 +163,7 @@ AC_DEFUN([AX_LIB_SQLITE3],
             SQLITE3_CFLAGS="$ac_sqlite3_cppflags"
             SQLITE3_LDFLAGS="$ac_sqlite3_ldflags"
 
-            ac_sqlite3_header_path="$ac_sqlite3_path/include/$ac_sqlite3_header"
+            ac_sqlite3_header_path="$ac_sqlite3_include_path/$ac_sqlite3_header"
 
             dnl Retrieve SQLite release version
             if test "x$ac_sqlite3_header_path" != "x"; then
@@ -184,5 +186,6 @@ AC_DEFUN([AX_LIB_SQLITE3],
     else
         AC_MSG_RESULT([disabled])
     fi
+    unset ac_sqlite3_include_path
 ])
 

diff --git a/m4/geos.m4 b/m4/geos.m4
index a410673b4..c16e1f33a 100644
--- a/m4/geos.m4
+++ b/m4/geos.m4
@@ -60,6 +60,7 @@ AC_DEFUN([GEOS_INIT],[
 
     AC_PATH_PROG(GEOS_CONFIG, geos-config, no)
     ac_geos_config_auto=yes
+    HAVE_GEOS="yes"
 
   else
 
