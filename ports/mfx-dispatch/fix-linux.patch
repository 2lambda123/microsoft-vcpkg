diff --git a/CMakeLists.txt b/CMakeLists.txt
index a8a3288..4315b44 100644
--- a/CMakeLists.txt
+++ b/CMakeLists.txt
@@ -5,23 +5,21 @@ project( libmfx )
 # FIXME Adds support for using system/other install of intel media sdk
 set(INTELMEDIASDK_PATH "${CMAKE_CURRENT_LIST_DIR}")
 
-set(SOURCES
-  src/main.cpp
-  src/mfx_dispatcher.cpp
-  src/mfx_dispatcher_log.cpp
-  src/mfx_function_table.cpp
-)
-
 if (CMAKE_SYSTEM_NAME MATCHES "Linux")
   add_definitions(-fPIC)
   list(APPEND SOURCES
-    src/mfx_library_iterator_linux.cpp
-    src/mfx_load_dll_linux.cpp
-    src/mfx_critical_section_linux.cpp
+    src/mfxloader.cpp
+    src/mfxparser.cpp
   )
 endif (CMAKE_SYSTEM_NAME MATCHES "Linux")
 
 if (CMAKE_SYSTEM_NAME MATCHES "Windows")
+  set(SOURCES
+    src/main.cpp
+    src/mfx_dispatcher.cpp
+    src/mfx_dispatcher_log.cpp
+    src/mfx_function_table.cpp
+  )
   add_definitions(-DWIN32)
   list(APPEND SOURCES
     src/mfx_critical_section.cpp
