diff --git a/ffi.h b/ffi.h
index d2ceb92..7bbb008 100644
--- a/ffi.h
+++ b/ffi.h
@@ -114,6 +114,9 @@ typedef struct _ffi_type
    when using the static version of the library.
    Besides, as a workaround, they can define FFI_BUILDING if they
    *know* they are going to link with the static library.  */
+
+#define FFI_BUILDING
+
 #if defined _MSC_VER
 # if defined FFI_BUILDING_DLL /* Building libffi.DLL with msvcc.sh */
 #  define FFI_API __declspec(dllexport)
