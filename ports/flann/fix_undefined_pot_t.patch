diff --git a/src/cpp/flann/algorithms/dist.h b/src/cpp/flann/algorithms/dist.h
index 4e6eb73..fd78902 100644
--- a/src/cpp/flann/algorithms/dist.h
+++ b/src/cpp/flann/algorithms/dist.h
@@ -477,6 +477,7 @@ struct HammingPopcnt
     ResultType operator()(Iterator1 a, Iterator2 b, size_t size, ResultType /*worst_dist*/ = -1) const
     {
         ResultType result = 0;
+        typedef unsigned long long pop_t;
 #if __GNUC__
 #if ANDROID && HAVE_NEON
         static uint64_t features = android_getCpuFeatures();
@@ -500,7 +501,6 @@ struct HammingPopcnt
         else
 #endif
         //for portability just use unsigned long -- and use the __builtin_popcountll (see docs for __builtin_popcountll)
-        typedef unsigned long long pop_t;
         const size_t modulo = size % sizeof(pop_t);
         const pop_t* a2 = reinterpret_cast<const pop_t*> (a);
         const pop_t* b2 = reinterpret_cast<const pop_t*> (b);
