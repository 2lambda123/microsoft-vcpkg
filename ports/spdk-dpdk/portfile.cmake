IF (NOT VCPKG_CMAKE_SYSTEM_NAME OR NOT VCPKG_CMAKE_SYSTEM_NAME STREQUAL "Linux")
    MESSAGE(FATAL_ERROR "Intel dpdk currently only supports Linux/BSD platforms")
ENDIF ()

VCPKG_FROM_GITHUB(
        OUT_SOURCE_PATH SOURCE_PATH
        REPO spdk/dpdk
        REF v21.02
        SHA512 f2efb5d6907a0ce7c3d2a63d37e10f2e0080a0d21c0555b46d03b800dc85b219cf0d90303035b32193c017d3b07333c91950e0b72265c1d9986e2eba39f3274e
        HEAD_REF master
)

x_vcpkg_get_python_packages(PYTHON_VERSION "3" OUT_PYTHON_VAR "PYTHON3" PACKAGES pyelftools )

vcpkg_configure_meson(
        SOURCE_PATH "${SOURCE_PATH}"
        OPTIONS 
)

vcpkg_install_meson()

FILE(INSTALL "${CMAKE_CURRENT_LIST_DIR}/usage" DESTINATION "${CURRENT_PACKAGES_DIR}/share/${PORT}")
FILE(INSTALL "${SOURCE_PATH}/license/README" DESTINATION "${CURRENT_PACKAGES_DIR}/share/${PORT}" RENAME copyright)
