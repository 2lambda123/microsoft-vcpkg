diff --git a/src/sail-codecs/jpegxl/CMakeLists.txt b/src/sail-codecs/jpegxl/CMakeLists.txt
index 16971a4..f9eaa79 100644
--- a/src/sail-codecs/jpegxl/CMakeLists.txt
+++ b/src/sail-codecs/jpegxl/CMakeLists.txt
@@ -1,7 +1,7 @@
 # Don't use SAIL_CODEC_JPEGXL_REQUIRED_OPTION as it requires CMake 3.18
 #
-find_library(JPEGXL_LIBRARY jxl                 NAMES jxl jxl-static)
-find_library(JPEGXL_THREADS_LIBRARY jxl_threads NAMES jxl_threads jxl_threads-static)
+find_library(JPEGXL_LIBRARY jxl                 NAMES jxl jxl-static NAMES_PER_DIR)
+find_library(JPEGXL_THREADS_LIBRARY jxl_threads NAMES jxl_threads jxl_threads-static NAMES_PER_DIR)
 find_path(JPEGXL_INCLUDE_DIRS jxl/decode.h)

 if (NOT JPEGXL_LIBRARY OR NOT JPEGXL_THREADS_LIBRARY OR NOT JPEGXL_INCLUDE_DIRS)
@@ -25,7 +25,7 @@ endif()

 # For static builds libjxl requires -DJXL_STATIC_DEFINE
 #
-if (JPEGXL_LIBRARY MATCHES "jxl-static")
+if (NOT BUILD_SHARED_LIBS)
     set(JXL_STATIC_DEFINE "JXL_STATIC_DEFINE")
 endif()

@@ -38,8 +38,8 @@ endif()
 #
 # etc.
 #
-set(SAIL_CODECS_FIND_DEPENDENCIES ${SAIL_CODECS_FIND_DEPENDENCIES} "find_library,jxl jxl-static,jxl jxl-static")
-set(SAIL_CODECS_FIND_DEPENDENCIES ${SAIL_CODECS_FIND_DEPENDENCIES} "find_library,jxl_threads jxl_threads-static,jxl_threads jxl_threads-static")
+set(SAIL_CODECS_FIND_DEPENDENCIES ${SAIL_CODECS_FIND_DEPENDENCIES} "find_library,jxl jxl-static NAMES_PER_DIR,jxl jxl-static NAMES_PER_DIR")
+set(SAIL_CODECS_FIND_DEPENDENCIES ${SAIL_CODECS_FIND_DEPENDENCIES} "find_library,jxl_threads jxl_threads-static NAMES_PER_DIR,jxl_threads jxl_threads-static NAMES_PER_DIR")

 set(SAIL_CODECS_FIND_DEPENDENCIES ${SAIL_CODECS_FIND_DEPENDENCIES} "find_library,hwy,hwy")
 set(SAIL_CODECS_FIND_DEPENDENCIES ${SAIL_CODECS_FIND_DEPENDENCIES} "find_library,brotlicommon brotlicommon-static,brotlicommon brotlicommon-static")
