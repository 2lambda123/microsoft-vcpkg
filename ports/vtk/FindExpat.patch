From b0615e9a48660d2a3ebc07da854d38316ff38880 Mon Sep 17 00:00:00 2001
From: "DESKTOP-6M1EIQI\\Raahil" <raahil.sha@zimaging.io>
Date: Wed, 2 Feb 2022 13:25:05 -0500
Subject: [PATCH] FindExpat

---
 CMake/FindEXPAT.cmake | 34 ++++++++++++++++++++++++++++------
 1 file changed, 28 insertions(+), 6 deletions(-)

diff --git a/CMake/FindEXPAT.cmake b/CMake/FindEXPAT.cmake
index c0adc0ba0c..1a45438354 100644
--- a/CMake/FindEXPAT.cmake
+++ b/CMake/FindEXPAT.cmake
@@ -73,15 +73,37 @@ if(EXPAT_FOUND)
 
   if(NOT TARGET EXPAT::EXPAT)
     include(vtkDetectLibraryType)
-    vtk_detect_library_type(expat_library_type
-      PATH "${EXPAT_LIBRARY}")
+    if(EXPAT_LIBRARY_RELEASE)
+            vtk_detect_library_type(expat_library_type
+                                    PATH "${EXPAT_LIBRARY_RELEASE}")
+    elseif(EXPAT_LIBRARY_DEBUG)
+            vtk_detect_library_type(expat_library_type
+                                    PATH "${EXPAT_LIBRARY_RELEASE}")
+    else()
+            vtk_detect_library_type(expat_library_type
+                                    PATH "${EXPAT_LIBRARY}")
+    endif()
+
     add_library(EXPAT::EXPAT "${expat_library_type}" IMPORTED)
     unset(expat_library_type)
     set_target_properties(EXPAT::EXPAT PROPERTIES
-      IMPORTED_LINK_INTERFACE_LANGUAGES "C"
-      IMPORTED_LOCATION "${EXPAT_LIBRARY}"
-      IMPORTED_IMPLIB "${EXPAT_LIBRARY}"
-      INTERFACE_INCLUDE_DIRECTORIES "${EXPAT_INCLUDE_DIRS}")
+          IMPORTED_LINK_INTERFACE_LANGUAGES "C"
+          INTERFACE_INCLUDE_DIRECTORIES "${EXPAT_INCLUDE_DIRS}")
+    if(EXPAT_LIBRARY_RELEASE)
+        set_target_properties(EXPAT::EXPAT PROPERTIES
+          IMPORTED_LOCATION_RELEASE "${EXPAT_LIBRARY_RELEASE}"
+          IMPORTED_IMPLIB_RELEASE "${EXPAT_LIBRARY_RELEASE}")
+    endif()
+    if(EXPAT_LIBRARY_DEBUG)
+        set_target_properties(EXPAT::EXPAT PROPERTIES
+          IMPORTED_LOCATION_DEBUG "${EXPAT_LIBRARY_DEBUG}"
+          IMPORTED_IMPLIB_DEBUG "${EXPAT_LIBRARY_DEBUG}")
+    endif()
+    if(EXPAT_LIBRARY_RELEASE OR EXPAT_LIBRARY_DEBUG AND NOT (EXPAT_LIBRARY_RELEASE AND EXPAT_LIBRARY_DEBUG))
+        set_target_properties(EXPAT::EXPAT PROPERTIES
+          IMPORTED_LOCATION "${EXPAT_LIBRARY}"
+          IMPORTED_IMPLIB "${EXPAT_LIBRARY}")
+    endif()
   endif()
 endif()
 
-- 
2.32.0.windows.1

