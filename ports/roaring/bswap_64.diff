diff --git a/include/roaring/portability.h b/include/roaring/portability.h
index fd4b5ee..ddfa3cb 100644
--- a/include/roaring/portability.h
+++ b/include/roaring/portability.h
@@ -439,7 +439,11 @@ static inline int roaring_hamming(uint64_t x) {
 #elif defined(__has_include) && \
     __has_include(<byteswap.h>)  // CROARING_IS_BIG_ENDIAN
 #include <byteswap.h>
+#if defined(bswap_64)
+#define croaring_htobe64(x) bswap_64(x)
+#else
 #define croaring_htobe64(x) __bswap_64(x)
+#endif
 
 #else  // CROARING_IS_BIG_ENDIAN
 // Gets compiled to bswap or equivalent on most compilers.
