diff --git a/src/CMakeLists.txt b/src/CMakeLists.txt
index 4ca0f14..9d60a9f 100644
--- a/src/CMakeLists.txt
+++ b/src/CMakeLists.txt
@@ -87,9 +87,21 @@ if(UNIX AND NOT APPLE)
     target_link_libraries (haru ${M_LIB})
 endif()
 
+if(LIBHPDF_SHARED)
+    if(WIN32 AND NOT CYGWIN)
+        set_target_properties(haru PROPERTIES DEFINE_SYMBOL HPDF_DLL_MAKE)
+    endif(WIN32 AND NOT CYGWIN)
+endif(LIBHPDF_SHARED)
+
 install(
-   TARGETS
+   TARGETS haru
+   EXPORT unofficial-haru
    ARCHIVE DESTINATION ${CMAKE_INSTALL_LIBDIR}
    LIBRARY DESTINATION ${CMAKE_INSTALL_LIBDIR}
    RUNTIME DESTINATION ${CMAKE_INSTALL_BINDIR}
 )
+
+install(EXPORT unofficial-haru
+    NAMESPACE unofficial::libharu::
+    DESTINATION share/unofficial-haru
+)
