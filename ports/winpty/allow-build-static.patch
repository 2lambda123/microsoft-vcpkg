diff --git a/src/include/winpty.h b/src/include/winpty.h
index 2a196a5..d8a69ad 100644
--- a/src/include/winpty.h
+++ b/src/include/winpty.h
@@ -32,11 +32,14 @@
  * When compiled with __declspec(dllexport), with either MinGW or MSVC, the
  * winpty functions are unadorned--no underscore prefix or '@nn' suffix--so
  * GetProcAddress can be used easily. */
-#ifdef COMPILING_WINPTY_DLL
-#define WINPTY_API __declspec(dllexport)
-#else
-#define WINPTY_API __declspec(dllimport)
-#endif
+//#ifdef COMPILING_WINPTY_DLL
+//#define WINPTY_API __declspec(dllexport)
+//#else
+//#define WINPTY_API __declspec(dllimport)
+//#endif
+
+//just empty definition for static lib
+#define WINPTY_API
 
 #ifdef __cplusplus
 extern "C" {
diff --git a/src/shared/WinptyVersion.cc b/src/shared/WinptyVersion.cc
index 76bb8a5..33a2c23 100644
--- a/src/shared/WinptyVersion.cc
+++ b/src/shared/WinptyVersion.cc
@@ -28,15 +28,15 @@
 // This header is auto-generated by either the Makefile (Unix) or
 // UpdateGenVersion.bat (gyp).  It is placed in a 'gen' directory, which is
 // added to the search path.
-#include "GenVersion.h"
+//#include "GenVersion.h"
 
 void dumpVersionToStdout() {
-    printf("winpty version %s\n", GenVersion_Version);
-    printf("commit %s\n", GenVersion_Commit);
+    printf("winpty version %s\n", PROJECT_VERSION);
+    printf("commit %s\n", "empty");
 }
 
 void dumpVersionToTrace() {
     trace("winpty version %s (commit %s)",
-        GenVersion_Version,
-        GenVersion_Commit);
+        PROJECT_VERSION,
+        "empty");
 }
