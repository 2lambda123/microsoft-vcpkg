 CMakeLists.txt                     | 18 +++++++++++-------
 cartographer/common/math.h         |  4 +++-
 cartographer/common/thread_pool.cc |  2 +-
 3 files changed, 15 insertions(+), 9 deletions(-)

diff --git a/CMakeLists.txt b/CMakeLists.txt
index c502769..0cb71e5 100644
--- a/CMakeLists.txt
+++ b/CMakeLists.txt
@@ -25,17 +25,21 @@ option(BUILD_GRPC "build Cartographer gRPC support" false)
 set(GRPC_PLUGIN_PATH "/usr/local/bin/grpc_cpp_plugin")
 
 include("${PROJECT_SOURCE_DIR}/cmake/functions.cmake")
-google_initialize_cartographer_project()
-google_enable_testing()
+#google_initialize_cartographer_project()
+#google_enable_testing()
 
 find_package(Boost REQUIRED COMPONENTS iostreams)
 find_package(Ceres REQUIRED COMPONENTS SparseLinearAlgebraLibrary)
 find_package(Eigen3 REQUIRED)
-find_package(LuaGoogle REQUIRED)
+find_package(Lua REQUIRED)
 find_package(Protobuf 3.0.0 REQUIRED)
 
-include(FindPkgConfig)
-PKG_SEARCH_MODULE(CAIRO REQUIRED cairo>=1.12.16)
+#include(FindPkgConfig)
+#PKG_SEARCH_MODULE(CAIRO REQUIRED cairo>=1.12.16)
+find_library(CAIRO REQUIRED cairo>=1.12.16)
+if(CMAKE_BUILD_TYPE STREQUAL Debug)
+    set(CAIRO_LIB_SUFFIX d)
+endif()
 
 # Only build the documentation if we can find Sphinx.
 find_package(Sphinx)
@@ -151,7 +155,7 @@ foreach(ABS_FIL ${ALL_TESTS})
   get_filename_component(FIL_WE ${REL_FIL} NAME_WE)
   # Replace slashes as required for CMP0037.
   string(REPLACE "/" "." TEST_TARGET_NAME "${DIR}/${FIL_WE}")
-  google_test("${TEST_TARGET_NAME}" ${ABS_FIL})
+  #google_test("${TEST_TARGET_NAME}" ${ABS_FIL}) #disable all the google tests for now
 endforeach()
 
 target_include_directories(${PROJECT_NAME} SYSTEM PUBLIC
@@ -182,7 +186,7 @@ target_include_directories(${PROJECT_NAME} SYSTEM PUBLIC
   ${PROTOBUF_INCLUDE_DIR})
 # TODO(hrapp): This should not explicitly list pthread and use
 # PROTOBUF_LIBRARIES, but that failed on first try.
-target_link_libraries(${PROJECT_NAME} PUBLIC ${PROTOBUF_LIBRARY} pthread)
+#target_link_libraries(${PROJECT_NAME} PUBLIC ${PROTOBUF_LIBRARY} pthread)
 
 # Add the binary directory first, so that port.h is included after it has
 # been generated.
diff --git a/cartographer/common/math.h b/cartographer/common/math.h
index f0ae9e2..3a16537 100644
--- a/cartographer/common/math.h
+++ b/cartographer/common/math.h
@@ -16,7 +16,9 @@
 
 #ifndef CARTOGRAPHER_COMMON_MATH_H_
 #define CARTOGRAPHER_COMMON_MATH_H_
-
+#ifndef M_PI
+#define M_PI 3.14159265358979323846
+#endif
 #include <cmath>
 #include <vector>
 
diff --git a/cartographer/common/thread_pool.cc b/cartographer/common/thread_pool.cc
index fdda166..178472f 100644
--- a/cartographer/common/thread_pool.cc
+++ b/cartographer/common/thread_pool.cc
@@ -16,7 +16,7 @@
 
 #include "cartographer/common/thread_pool.h"
 
-#include <unistd.h>
+//#include <unistd.h>
 #include <algorithm>
 #include <chrono>
 #include <numeric>
