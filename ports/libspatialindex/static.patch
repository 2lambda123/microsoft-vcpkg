diff --git a/src/CMakeLists.txt b/src/CMakeLists.txt
index 90f4501bc..c9a3f18b6 100644
--- a/src/CMakeLists.txt
+++ b/src/CMakeLists.txt
@@ -188,9 +188,13 @@ set(SIDX_SOURCES
 #endif()
 
 
-add_library(${SIDX_LIB_NAME} ${SIDX_SOURCES})
-
-add_library(${SIDX_C_LIB_NAME} ${SIDX_CAPI_CPP})
+if(BUILD_SHARED_LIBS)
+  add_library(${SIDX_LIB_NAME} SHARED ${SIDX_SOURCES})
+  add_library(${SIDX_C_LIB_NAME} SHARED ${SIDX_CAPI_CPP})
+else(BUILD_SHARED_LIBS)
+  add_library(${SIDX_LIB_NAME} STATIC ${SIDX_SOURCES})
+  add_library(${SIDX_C_LIB_NAME} STATIC ${SIDX_CAPI_CPP})
+endif(BUILD_SHARED_LIBS)
 
 target_link_libraries(${SIDX_C_LIB_NAME}
   ${SIDX_LIB_NAME}
