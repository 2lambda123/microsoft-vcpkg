vcpkg_from_github(
    OUT_SOURCE_PATH SOURCE_PATH
    REPO winsoft666/CrashRptLite
    HEAD_REF master
    REF 5326595c8c6540ad5d9e682db8335aab4af6c42a
    SHA512 74a274d63df35ce1d3f595bf41cb88cb6af16b9ad2a5e7c284b4d43fdcf3dade42fce133699d4d63c9816f229353a56d4e4d63a0e1f9a334e9e24c66ff612c0a
)

string(COMPARE EQUAL "${VCPKG_LIBRARY_LINKAGE}" "dynamic" CRASHREPORT_BUILD_SHARED_LIBS)
string(COMPARE EQUAL "${VCPKG_CRT_LINKAGE}" "static" CRASHREPORT_USE_STATIC_CRT)

vcpkg_cmake_configure(
    SOURCE_PATH ${SOURCE_PATH}
    OPTIONS
        -DCRASHREPORT_BUILD_SHARED_LIBS:BOOL=${CRASHREPORT_BUILD_SHARED_LIBS}
        -DCRASHREPORT_USE_STATIC_CRT:BOOL=${CRASHREPORT_USE_STATIC_CRT}
        -DCRASHREPORT_BUILD_TESTS=OFF
)

vcpkg_cmake_install()

file(INSTALL ${SOURCE_PATH}/CrashRpt_License.txt DESTINATION ${CURRENT_PACKAGES_DIR}/share/${PORT} RENAME copyright)
file(REMOVE_RECURSE ${CURRENT_PACKAGES_DIR}/debug/include)

vcpkg_copy_pdbs()
vcpkg_copy_tool_dependencies(${CURRENT_PACKAGES_DIR}/tools/${PORT})