diff --git a/CMakeLists.txt b/CMakeLists.txt
index c4cb920..eeb17ee 100644
--- a/CMakeLists.txt
+++ b/CMakeLists.txt
@@ -126,8 +126,8 @@ ENDIF()
 # CPPFLAGS, CXXFLAGS and LDFLAGS from the environment
 
 SET(FreeBSD11Up False)
-if (${CMAKE_SYSTEM_NAME} STREQUAL "FreeBSD" AND
-    ${CMAKE_SYSTEM_VERSION} GREATER "10")
+if ("${CMAKE_SYSTEM_NAME}" STREQUAL "FreeBSD" AND
+    "${CMAKE_SYSTEM_VERSION}" GREATER "10")
   SET(FreeBSD11Up True)
 endif()
 
@@ -490,10 +490,12 @@ INCLUDE_DIRECTORIES(${CMAKE_BINARY_DIR}/driver/nativeapi)
 ADD_SUBDIRECTORY(cppconn)
 ADD_SUBDIRECTORY(driver)
 ADD_SUBDIRECTORY(examples)
+IF(MYSQLCPPCONN_BUILD_TESTS)
 ADD_SUBDIRECTORY(test)
 ADD_SUBDIRECTORY(test/framework)
 ADD_SUBDIRECTORY(test/CJUnitTestsPort)
 ADD_SUBDIRECTORY(test/unit)
+ENDIF(MYSQLCPPCONN_BUILD_TESTS)
 
 IF(DEFINED CMAKE_SYSTEM_NAME AND ${CMAKE_SYSTEM_NAME} STREQUAL "SunOS")
     # see also README
diff --git a/driver/CMakeLists.txt b/driver/CMakeLists.txt
index e7136aa..73cf1e6 100644
--- a/driver/CMakeLists.txt
+++ b/driver/CMakeLists.txt
@@ -181,7 +181,9 @@ IF(WIN32)
 ENDIF(WIN32)
 
 
+IF(NOT STATIC_ONLY)
 ADD_LIBRARY(mysqlcppconn SHARED ${MYSQLCPPCONN_SOURCES})
+ENDIF(NOT STATIC_ONLY)
 ADD_LIBRARY(mysqlcppconn-static STATIC ${MYSQLCPPCONN_SOURCES})
 SET(MYSQL_LIB_OBJECTS "${MYSQL_LIBRARIES}")
 
@@ -240,6 +242,7 @@ ELSEIF(NOT WIN32)
       FILE(TO_NATIVE_PATH ${OBJ} OBJ)
       SET(MYSQL_STATIC_LIB_OBJECTS "${MYSQL_STATIC_LIB_OBJECTS} ${OBJ}")
     ENDFOREACH(OBJ ${MYSQL_STATIC_OBJECTS})
+    FILE(RENAME ${CMAKE_CURRENT_BINARY_DIR}/.MYSQL_ARCHIVES ${CMAKE_CURRENT_BINARY_DIR}/../.MYSQL_ARCHIVES)
   ENDIF(MYSQLCLIENT_STATIC_LINKING)
   SET(MYSQL_LIB_OBJECTS "${MYSQL_STATIC_LIB_OBJECTS}")
 ENDIF(WIN32)
@@ -250,12 +253,14 @@ IF(CMAKE_COMPILER_IS_GNUCC AND MYSQLCPPCONN_GCOV_ENABLE)
 ENDIF(CMAKE_COMPILER_IS_GNUCC AND MYSQLCPPCONN_GCOV_ENABLE)
 
 
+IF(NOT STATIC_ONLY)
 TARGET_LINK_LIBRARIES(mysqlcppconn ${MY_TARGET_LINK_LIBRARIES_DYNAMIC}
   ${MY_GCOV_LINK_LIBRARIES}
   ${MYSQLCPPCONN_BOOST_SYSTEM_LIBS}
   ${MYSQLCPPCONN_BOOST_THREAD_LIBS}
   ${MYSQLCPPCONN_EXTRA_LIBRARIES}
   ${MYSQLCPPCONN_ICU_LIBRARY})
+ENDIF(NOT STATIC_ONLY)
 
 # Need to find way it's defined for mysqlcppconn-static only
 #IF(WIN32)
@@ -290,6 +295,7 @@ SET_TARGET_PROPERTIES(mysqlcppconn-static PROPERTIES
   COMPILE_DEFINITIONS CPPCONN_LIB_BUILD=""
   STATIC_LIBRARY_FLAGS "${MYSQL_LIB_OBJECTS}")
 
+IF(NOT STATIC_ONLY)
 SET_TARGET_PROPERTIES(mysqlcppconn
   PROPERTIES
   SOVERSION "${MYSQLCPPCONN_SOVERSION}"
@@ -298,6 +304,7 @@ SET_TARGET_PROPERTIES(mysqlcppconn
   COMPILE_FLAGS "${MYSQLCPPCONN_COMPILE_FLAGS_ENV}"
   COMPILE_DEFINITIONS CPPCONN_SO_BUILD=""
   LINK_INTERFACE_LIBRARIES "")
+ENDIF(NOT STATIC_ONLY)
 
 IF(WIN32)
 #  SET_TARGET_PROPERTIES(mysqlcppconn PROPERTIES
@@ -316,10 +323,21 @@ IF(WIN32)
 #    CHANGE_CRT("/MD")
 #  ENDIF()
 
+  IF(STATIC_ONLY)
+    IF(STATIC_CRT)
+      INCLUDE(${CMAKE_SOURCE_DIR}/changeCrt.cmake)
+      CHANGE_CRT("T")
+    ENDIF(STATIC_CRT)
+  INSTALL(TARGETS mysqlcppconn-static
+    RUNTIME DESTINATION bin
+    ARCHIVE DESTINATION lib
+  )
+  ELSE(STATIC_ONLY)
   INSTALL(TARGETS mysqlcppconn mysqlcppconn-static
-    RUNTIME DESTINATION lib
+    RUNTIME DESTINATION bin
     ARCHIVE DESTINATION lib
   )
+  ENDIF(STATIC_ONLY)
 ELSE(WIN32)
   IF(ENABLE_BUILD_DYNAMIC OR ENABLE_BUILD_STATIC)
     IF(ENABLE_BUILD_DYNAMIC)
