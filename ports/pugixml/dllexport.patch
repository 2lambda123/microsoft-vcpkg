diff --git a/CMakeLists.txt b/CMakeLists.txt
index 9860f38..41ef47f 100644
--- a/CMakeLists.txt
+++ b/CMakeLists.txt
@@ -114,9 +114,12 @@ if (BUILD_SHARED_LIBS)
     PUBLIC
       ${PUGIXML_BUILD_DEFINES}
       ${PUGIXML_PUBLIC_DEFINITIONS}
+  )
+  if(WIN32)
+    target_compile_definitions(pugixml-shared      
     PRIVATE
-      PUGIXML_API=$<IF:${pugixml.msvc},__declspec\(dllexport\),__attribute__\(\(visibility\("default"\)\)\)>
-    )
+      PUGIXML_API=__declspec\(dllexport\))
+  endif()
   target_compile_options(pugixml-shared
     PRIVATE
       ${msvc-rt-mtd-shared}
