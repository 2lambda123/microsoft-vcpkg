diff --git a/src/blend2d/api-build_p.h b/src/blend2d/api-build_p.h
index 1e3288e..7f471f8 100644
--- a/src/blend2d/api-build_p.h
+++ b/src/blend2d/api-build_p.h
@@ -124,7 +124,19 @@ extern "C" void __tsan_release(void *addr);
 #endif
 
 #if defined(_WIN32) && !defined(_WIN32_WINNT)
-  #define _WIN32_WINNT 0x0600
+  #if defined(WINAPI_FAMILY) && defined(__has_include)
+    #if __has_include(<winapifamily.h>)
+      #include <winapifamily.h>
+      #if WINAPI_FAMILY == WINAPI_FAMILY_PC_APP
+        #define BL_PLATFORM_UWP
+        #define _WIN32_WINNT 0x0602 // Windows 8+ (CreateFile2, CreateFileMappingFromApp, ...)
+      #endif
+    #endif
+  #endif
+
+  #if !defined(_WIN32_WINNT)
+    #define _WIN32_WINNT 0x0600 // Windows Vista+ (CONDITION_VARIABLE, ...)
+  #endif
 #endif
 
 // The FileSystem API works fully with 64-bit file sizes and offsets, however, this feature must be enabled before
diff --git a/src/blend2d/filesystem.cpp b/src/blend2d/filesystem.cpp
index 1c7c2d4..9388821 100644
--- a/src/blend2d/filesystem.cpp
+++ b/src/blend2d/filesystem.cpp
@@ -24,10 +24,6 @@
   #elif defined(__NetBSD__) || defined(__APPLE__)
     #define BL_FS_STAT_MTIMESPEC(s) s.st_mtimespec
   #endif
-#else
-  #if !defined(CreateFile)
-    #define BL_PLATFORM_UWP
-  #endif
 #endif
 
 #ifdef _WIN32
