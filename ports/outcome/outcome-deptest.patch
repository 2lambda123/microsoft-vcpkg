diff --git a/CMakeLists.txt b/CMakeLists.txt
index c00712f..1d66197 100644
--- a/CMakeLists.txt
+++ b/CMakeLists.txt
@@ -143,6 +143,11 @@ endif()
 # Set the library dependencies this library has
 target_link_libraries(outcome_hl INTERFACE quickcpplib::hl)
 
+if(OUTCOME_ENABLE_DEPENDENCY_TEST)
+  add_library(outcome_dependency_test OBJECT doc/src/snippets/intro_example.cpp)
+  target_link_libraries(outcome_dependency_test PRIVATE outcome_hl)
+endif()
+
 if(EXISTS "${CMAKE_CURRENT_SOURCE_DIR}/test" AND NOT PROJECT_IS_DEPENDENCY)
   # For all possible configurations of this library, add each test
   list_filter(outcome_TESTS EXCLUDE REGEX "constexprs")
