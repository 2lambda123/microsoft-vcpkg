diff --git a/CMakeLists.txt b/CMakeLists.txt
index ccc959e..d3e5d09 100644
--- a/CMakeLists.txt
+++ b/CMakeLists.txt
@@ -297,8 +297,8 @@
 if(CPPTRACE_GET_SYMBOLS_WITH_LIBDWARF)
   target_compile_definitions(cpptrace PUBLIC CPPTRACE_GET_SYMBOLS_WITH_LIBDWARF)
   if(CPPTRACE_USE_SYSTEM_LIBDWARF)
-    find_package(libdwarf REQUIRED)
-    target_link_libraries(cpptrace PRIVATE libdwarf)
+    find_package(libdwarf CONFIG REQUIRED)
+    target_link_libraries(cpptrace PRIVATE $<IF:$<TARGET_EXISTS:libdwarf::dwarf-static>,libdwarf::dwarf-static,libdwarf::dwarf-shared>)
   else()
     add_subdirectory(bundled/libdwarf)
     target_link_libraries(cpptrace PRIVATE dwarf)
@@ -379,7 +379,7 @@
   include(CMakePackageConfigHelpers)
 
   if(CPPTRACE_GET_SYMBOLS_WITH_LIBDWARF)
-    set(CPPTRACE_STATIC_EXPORT_TARGETS cpptrace dwarf)
+    set(CPPTRACE_STATIC_EXPORT_TARGETS cpptrace $<IF:$<TARGET_EXISTS:libdwarf::dwarf-static>,libdwarf::dwarf-static,libdwarf::dwarf-shared>)
   else()
     set(CPPTRACE_STATIC_EXPORT_TARGETS cpptrace)
   endif()
@@ -391,7 +391,7 @@
       LIBRARY DESTINATION ${CMAKE_INSTALL_LIBDIR}
       INCLUDES DESTINATION ${CMAKE_INSTALL_INCLUDEDIR}
       ARCHIVE DESTINATION ${CMAKE_INSTALL_LIBDIR}
-      RUNTIME DESTINATION ${CMAKE_INSTALL_LIBDIR}
+      RUNTIME DESTINATION bin
     )
   else()
     install(
@@ -400,7 +400,7 @@
       LIBRARY DESTINATION ${CMAKE_INSTALL_LIBDIR}
       INCLUDES DESTINATION ${CMAKE_INSTALL_INCLUDEDIR}
       ARCHIVE DESTINATION ${CMAKE_INSTALL_LIBDIR}
-      RUNTIME DESTINATION ${CMAKE_INSTALL_LIBDIR}
+      RUNTIME DESTINATION bin
     )
   endif()
 

--- a/src/platform/utils.hpp
+++ b/src/platform/utils.hpp
@@ -334,7 +334,7 @@ namespace detail {
         return static_cast<unsigned long long>(t);
     }
     template<typename T>
-    unsigned long long to_uintptr(T t) {
+    uintptr_t to_uintptr(T t) {
         return static_cast<uintptr_t>(t);
     }

