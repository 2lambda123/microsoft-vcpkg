commit 8d58150507838016eab07d0b8f4eba25865181c3
Author: jzaddach <jzaddach@cisco.com>
Date:   Fri Nov 27 17:33:09 2020 +0100

    Don't build unrar support when compiling static only

diff --git a/CMakeLists.txt b/CMakeLists.txt
index 9f1cd42c5..0eb2b7626 100644
--- a/CMakeLists.txt
+++ b/CMakeLists.txt
@@ -104,6 +104,10 @@ if(ENABLE_LIBCLAMAV_ONLY)
     set(ENABLE_APP              OFF)
     set(ENABLE_EXAMPLES         OFF)
 endif()
+if(NOT ENABLE_SHARED_LIB AND ENABLE_UNRAR)
+    message(STATUS "Disabling unrar because this is a static-only build, and unrar support needs to build as a shared library")
+    set(ENABLE_UNRAR            OFF)
+endif()
 
 #
 # Set RPATH for custom install prefixes
