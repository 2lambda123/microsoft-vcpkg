diff --git a/CMakeLists.txt b/CMakeLists.txt
index 75f367f..29f9b82 100644
--- a/CMakeLists.txt
+++ b/CMakeLists.txt
@@ -74,6 +74,9 @@ set(CMAKE_MODULE_PATH ${CMakeScripts_MODULE_DIR})
 # Turn on all compiler warnings
 include(EnableAllWarnings)
 
+option(ENABLE_TOOLS OFF)
+option(ENABLE_DB OFF)
+
 # Figure out our git version
 option(UPDATE_GIT_VERSION_INFO "update git version info in source tree" ON)
 mark_as_advanced(UPDATE_GIT_VERSION_INFO)
@@ -190,7 +193,7 @@ add_subdirectory(Core)
 export(
     TARGETS MOOS
     NAMESPACE MOOS::
-    FILE UseMOOS.cmake
+    FILE UseMOOSTargets.cmake
 )
 
 # Support existing projects that expect to find MOOS_LIBRARIES and
@@ -222,7 +225,7 @@ set(PROJECT_CONFIG_PATH "lib/cmake/MOOS")
 install(
     EXPORT MOOS
     NAMESPACE MOOS::
-    FILE UseMOOS.cmake
+    FILE UseMOOSTargets.cmake
     DESTINATION ${PROJECT_CONFIG_PATH}
 )
 
diff --git a/Core/CMakeLists.txt b/Core/CMakeLists.txt
index 4cbe7cb..cd09f21 100644
--- a/Core/CMakeLists.txt
+++ b/Core/CMakeLists.txt
@@ -1,3 +1,7 @@
 add_subdirectory(libMOOS)
-add_subdirectory(tools)
-add_subdirectory(MOOSDB)
+if(ENABLE_TOOLS)
+  add_subdirectory(tools)
+endif()
+if(ENABLE_DB)
+  add_subdirectory(MOOSDB)
+endif()
diff --git a/Core/MOOSDB/CMakeLists.txt b/Core/MOOSDB/CMakeLists.txt
index 7b1a903..975dacd 100644
--- a/Core/MOOSDB/CMakeLists.txt
+++ b/Core/MOOSDB/CMakeLists.txt
@@ -27,5 +27,4 @@ install(TARGETS ${EXECNAME}
   ARCHIVE DESTINATION lib
 )
 
-add_subdirectory(testing)
 
diff --git a/Core/libMOOS/App/MOOSApp.cpp b/Core/libMOOS/App/MOOSApp.cpp
index c446ea2..e0b22f7 100644
--- a/Core/libMOOS/App/MOOSApp.cpp
+++ b/Core/libMOOS/App/MOOSApp.cpp
@@ -38,7 +38,6 @@
 #include "MOOS/libMOOS/App/MOOSApp.h"
 #include "MOOS/libMOOS/Utils/ConsoleColours.h"
 #include "MOOS/libMOOS/MOOSVersion.h"
-#include "MOOS/libMOOS/GitVersion.h"
 
 #include <cmath>
 #include <iostream>
diff --git a/Core/libMOOS/CMakeLists.txt b/Core/libMOOS/CMakeLists.txt
index b74a30f..4c3cff4 100644
--- a/Core/libMOOS/CMakeLists.txt
+++ b/Core/libMOOS/CMakeLists.txt
@@ -122,6 +122,8 @@ add_library(MOOS
     ${DB_SOURCES}
 )
 
+add_compile_definitions(MOOS_GIT_VERSION="${PACKAGE_VERSION}")
+
 foreach(INCLUDE_ROOT IN LISTS INCLUDE_ROOTS)
     target_include_directories(MOOS PUBLIC
         "$<BUILD_INTERFACE:${INCLUDE_ROOT}>"
@@ -196,7 +198,7 @@ mark_as_advanced(TIME_WARP_AGGLOMERATION_CONSTANT)
 install(
     DIRECTORY ${INCLUDE_ROOTS}
     DESTINATION .
-    FILES_MATCHING PATTERN "*.h" PATTERN "*.hxx"
+    FILES_MATCHING PATTERN "*.h" PATTERN "*.hxx" PATTERN "*.hpp"
 )
 
 # install libraries
@@ -206,5 +208,4 @@ install(TARGETS MOOS
   ARCHIVE DESTINATION lib
 )
 
-add_subdirectory(testing)
 
diff --git a/Core/libMOOS/DB/MOOSDB.cpp b/Core/libMOOS/DB/MOOSDB.cpp
index 0dc99af..6d931b6 100644
--- a/Core/libMOOS/DB/MOOSDB.cpp
+++ b/Core/libMOOS/DB/MOOSDB.cpp
@@ -38,7 +38,6 @@
 #include "MOOS/libMOOS/Thirdparty/getpot/GetPot.hpp"
 #include "MOOS/libMOOS/Utils/ConsoleColours.h"
 #include "MOOS/libMOOS/MOOSVersion.h"
-#include "MOOS/libMOOS/GitVersion.h"
 #include "MOOS/libMOOS/DB/MOOSDBLogger.h"
 
 
diff --git a/MOOSConfig.cmake.in b/MOOSConfig.cmake.in
index 10af599..dff769a 100644
--- a/MOOSConfig.cmake.in
+++ b/MOOSConfig.cmake.in
@@ -2,7 +2,7 @@
 
 # Pick up the auto-generated file which knows how to add the imported library
 # targets for the libraries that MOOS exports.
-set(exports_file "${CMAKE_CURRENT_LIST_DIR}/UseMOOS.cmake")
+set(exports_file "${CMAKE_CURRENT_LIST_DIR}/UseMOOSTargets.cmake")
 include(${exports_file})
 
 include(FindPackageHandleStandardArgs)
