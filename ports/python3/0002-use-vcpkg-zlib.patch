From cb887fa33506fa2caa29b5d34dd53ddb82292c10 Mon Sep 17 00:00:00 2001
From: Adam Johnson <AdamJohnso@gmail.com>
Date: Wed, 9 Sep 2020 15:20:36 -0400
Subject: [PATCH 2/6] use vcpkg zlib

building without zlib is not a supported configuration, per the warning
messages.
---
 PCbuild/pythoncore.vcxproj | 6 ++++--
 1 file changed, 4 insertions(+), 2 deletions(-)

diff --git a/PCbuild/pythoncore.vcxproj b/PCbuild/pythoncore.vcxproj
index 1ab1b703e7..8589dbf6e8 100644
--- a/PCbuild/pythoncore.vcxproj
+++ b/PCbuild/pythoncore.vcxproj
@@ -494,8 +494,10 @@
     <ClCompile Include="..\Python\thread.c" />
     <ClCompile Include="..\Python\traceback.c" />
   </ItemGroup>
-  <ItemGroup Condition="$(IncludeExternals)">
+  <ItemGroup>
     <ClCompile Include="..\Modules\zlibmodule.c" />
+  </ItemGroup>
+  <ItemGroup Condition="false">
     <ClCompile Include="$(zlibDir)\adler32.c" />
     <ClCompile Include="$(zlibDir)\compress.c" />
     <ClCompile Include="$(zlibDir)\crc32.c" />
@@ -545,7 +547,7 @@
   <Target Name="_WarnAboutToolset" BeforeTargets="PrepareForBuild" Condition="$(PlatformToolset) != 'v140' and $(PlatformToolset) != 'v141' and $(PlatformToolset) != 'v142'">
     <Warning Text="Toolset $(PlatformToolset) is not used for official builds. Your build may have errors or incompatibilities." />
   </Target>
-  <Target Name="_WarnAboutZlib" BeforeTargets="PrepareForBuild" Condition="!$(IncludeExternals)">
+  <Target Name="_WarnAboutZlib" BeforeTargets="PrepareForBuild" Condition="false">
     <Warning Text="Not including zlib is not a supported configuration." />
   </Target>
 
-- 
2.33.0.windows.1

