diff --git a/CMakeLists.txt b/CMakeLists.txt
index afa52ef7f..746f8eac5 100644
--- a/CMakeLists.txt
+++ b/CMakeLists.txt
@@ -92,12 +92,14 @@ set(CMAKE_MODULE_PATH ${PROJECT_SOURCE_DIR}/cmake)
 option(EIGEN_TEST_CXX11 "Enable testing of unsupported CXX11 tests (i.e. those starting with cxx11_)." OFF)
 
 macro(ei_add_cxx_compiler_flag FLAG)
+  if(FALSE) # Since eigen3 is header only and vcpkg does not build tests this can be disabled by default.
   string(REGEX REPLACE "-" "" SFLAG1 ${FLAG})
   string(REGEX REPLACE "\\+" "p" SFLAG ${SFLAG1})
   check_cxx_compiler_flag(${FLAG} COMPILER_SUPPORT_${SFLAG})
   if(COMPILER_SUPPORT_${SFLAG})
     set(CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} ${FLAG}")
   endif()
+  endif()
 endmacro()
 
 # Determine if we should build shared libraries on this platform.
@@ -152,7 +154,7 @@ endif()
 
 set(EIGEN_TEST_MAX_SIZE "320" CACHE STRING "Maximal matrix/vector size, default is 320")
 
-if(NOT MSVC)
+if(NOT MSVC AND FALSE)
   # We assume that other compilers are partly compatible with GNUCC
 
   # clang outputs some warnings for unknown flags that are not caught by check_cxx_compiler_flag
@@ -322,7 +324,7 @@ if(NOT MSVC)
     endif()
   endif()
 
-else()
+elseif(FALSE)
 
   # C4127 - conditional expression is constant
   # C4714 - marked as __forceinline not inlined (I failed to deactivate it selectively)
