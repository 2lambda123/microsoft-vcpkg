diff --git a/src/unix/glegl.cpp b/src/unix/glegl.cpp
index 9e1b6b7..5e971a4 100644
--- a/src/unix/glegl.cpp
+++ b/src/unix/glegl.cpp
@@ -801,6 +801,7 @@ void wxGLCanvasEGL::FreeDefaultConfig()
 
 bool wxGLCanvasEGL::SwapBuffers()
 {
+#ifdef GDK_WINDOWING_WAYLAND
     // Before doing anything else, ensure that eglSwapBuffers() doesn't block:
     // under Wayland we don't want it to because we use the surface callback to
     // know when we should draw anyhow and with X11 it blocks for up to a
@@ -827,6 +828,7 @@ bool wxGLCanvasEGL::SwapBuffers()
                        this, eglGetError());
         }
     }
+#endif // GDK_WINDOWING_WAYLAND
 
     GdkWindow* const window = GTKGetDrawingWindow();
 #ifdef GDK_WINDOWING_X11
