diff --git a/build-cmake/CMakeLists.txt b/build-cmake/CMakeLists.txt
index ba0b730..8ca85e6 100644
--- a/build-cmake/CMakeLists.txt
+++ b/build-cmake/CMakeLists.txt
@@ -15,7 +15,14 @@ if (MSVC AND NOT BUILD_SHARED_LIBS)
 	SET(Protobuf_USE_STATIC_LIBS ON)
 endif (MSVC AND NOT BUILD_SHARED_LIBS)
 
-FIND_PACKAGE(Protobuf REQUIRED)
+FIND_PACKAGE(Protobuf CONFIG)
+if(Protobuf_FOUND)
+  # Keep compatibility with FindProtobuf CMake module
+  set(PROTOBUF_PROTOC_EXECUTABLE $<TARGET_FILE:protobuf::protoc>)
+else()
+  MESSAGE(STATUS "Protobuf CMake config not found fallback to Cmake Module")
+  FIND_PACKAGE(Protobuf REQUIRED)
+endif()
 file(REAL_PATH "${PROTOBUF_INCLUDE_DIR}" PROTOBUF_INCLUDE_DIR)
 INCLUDE_DIRECTORIES(${PROTOBUF_INCLUDE_DIR})
 
@@ -209,7 +216,7 @@ GENERATE_TEST_SOURCES(${TEST_DIR}/test-full.proto t/test-full.pb-c.c t/test-full
 
 ADD_EXECUTABLE(cxx-generate-packed-data ${TEST_DIR}/generated-code2/cxx-generate-packed-data.cc t/test-full.pb.h t/test-full.pb.cc protobuf-c/protobuf-c.pb.cc protobuf-c/protobuf-c.pb.h)
 TARGET_LINK_LIBRARIES(cxx-generate-packed-data
-    ${PROTOBUF_LIBRARY}
+    protobuf::libprotobuf
     ${protobuf_ABSL_USED_TARGETS}
     ${protobuf_UTF8_USED_TARGETS}
 )
